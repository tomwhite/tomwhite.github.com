---
layout: post
title: Building a better TinyURL
date: '2007-07-15T14:54:00.000+01:00'
author: Tom White
tags: 
modified_time: '2007-11-20T17:29:21.628Z'
blogger_id: tag:blogger.com,1999:blog-8898949683610477251.post-3914729985937573884
---

At Kizoom we are building a service that sends lots of text messages. We want to provide more information than we can fit into a single 160 character SMS, so we put a link at the end to provide more information. Space being at a premium, we obviously want to minimise the link length. Cue TinyURL.<br /><br />Except we can do better than TinyURL. For a start we got a domain that is shorter - instead of the 11 characters in tinyurl.com we have saved 6 characters by registering a 5 character domain (g0.to) - every character counts in SMS. Furthermore, we can distinguish upper and lower case letters, so g0.to/a is different to g0.to/A, since we don't have the requirement of having URLs that can be read out over the phone (unlike TinyURL) - they're just embedded links. This gave us a base 62 representation (26 * 2 letters plus 10 digits) - substantially more compact than TinyURL's base 36 representation (26 letters plus 10 digits). We decided against putting in non-alphanumeric characters since they look a bit scary to end users.<br /><br />I'm not sure of TinyURL's usage policies, but I doubt they'd like us creating hundreds of links a minute. Remember - we're putting a link on each text we send. This convinced us that we needed to operate the service ourselves. It also gives us the flexibility to reuse URLs after a while, although we don't at present.<br /><br />The first implementation used an auto-incrementing database sequence to generate primary keys for a table storing the URLs. The key was base-62 encoded and tacked at the end of the g0.to base URL. This worked very nicely until we realised that at some point we would tell someone to g0.to/hell - and worse! Our solution was to restrict the alphabet by removing vowels, and 0, 1, 3 (for O, I/L and E respectively). This makes for longer URLs, but we think it's an acceptable compromise.<br /><br />Interestingly, TinyURL doesn't seem to worry about this problem (or certainly they didn't, try http://tinyurl.com/&lt;insert favourite profanity here&gt;). They don't seem to use an incrementing key, rather they choose a random key. This has the side-effect of making it hard to guess TinyURLs since the space is so large. It also makes it possible to reject keys containing profanities (by just choosing another random key) with little effect on the size of the key space. This requires a list of profanities - in all target languages! - so it is harder to implement than the simple expedient of omitting vowels. Of course, now the challenge is to come up with an offensive word that contains no vowels...