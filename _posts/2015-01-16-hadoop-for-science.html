---
layout: post
title: Hadoop for Science
date: '2015-01-16T15:57:00.004Z'
author: Tom White
tags: 
modified_time: '2015-01-16T15:57:58.865Z'
blogger_id: tag:blogger.com,1999:blog-8898949683610477251.post-4214990654023824593
blogger_orig_url: http://www.tom-e-white.com/2015/01/hadoop-for-science.html
---

Some of the largest datasets are generated by the sciences. For example, the Large Hadron Collider produces around <a href="http://wlcg.web.cern.ch/">30PB of data a year</a>. I'm interested in the technologies and tools for analyzing these kind of datasets, and how they work with Hadoop, so here's a brief post.<br /><br /><h3>Open Data</h3>Amazon S3 seems to be emerging as the <i>de facto</i> solution for sharing large datasets. In particular, AWS curates a variety of <a href="http://aws.amazon.com/public-data-sets/">public data sets</a> that can be accessed for free (from within AWS; there are egress charges otherwise). To take one example from genomics, the <a href="http://www.1000genomes.org/">1000 Genomes project</a> hosts a 200TB <a href="http://aws.amazon.com/1000genomes/">dataset on S3</a>. <br /><br />Hadoop has long supported S3 as a filesystem, but recently there has been a <a href="https://issues.apache.org/jira/browse/HADOOP-10400">lot of work</a> to make it more robust and scalable. It’s natural to process S3-resident data in the cloud, and here there are many options for Hadoop. The recently released <a href="http://www.cloudera.com/content/cloudera/en/products-and-services/director.html">Cloudera Director</a>, for example, makes it possible to run all the components of CDH in the cloud. <br /><br /><h3>Notebooks</h3>By "notebooks" I mean web-based, computational scientific notebooks, exemplified by the <a href="http://ipython.org/notebook.html">IPython Notebook</a>. Notebooks have been around in the scientific community for a long time (they were added to IPython in 2011), but increasingly they seem to be reaching the larger data scientist and developer community. Notebooks combine prose and computation, which is great for exposition and interactivity. They are also easy to share, which helps foster collaboration and reproducibility of research. <br /><br />It’s possible to run IPython against PySpark (notebooks are inherently interactive, so working with Spark is the natural Hadoop lead in), but it requires a bit of <a href="http://blog.cloudera.com/blog/2014/08/how-to-use-ipython-notebook-with-apache-spark/">manual set up</a>. Hopefully that will get easier<span style="font-family: Helvetica; font-size: 12px;">—</span>ideally Hadoop distributions like CDH will come with packages to run an appropriately-configured IPython notebook server.<br /><br /><h3>Distributed Data Frames</h3>IPython supports many different languages and libraries. (Despite its name IPython is not restricted to Python; in fact, it is being refactored into more modular pieces as a part of the <a href="http://jupyter.org/">Jupyter</a> project.) Most notebook users are data scientists, and the central abstraction that they work with is the <i>data frame.</i> Both <a href="http://www.r-project.org/">R</a> and <a href="http://pandas.pydata.org/">pandas</a>, for example, use data frames, although both systems were designed to work on a single machine.<br /><br />The challenge is to make systems like R and pandas work with distributed data. Many of the solutions to date have addressed this problem by adding MapReduce user libraries. However, this is unsatisfactory for several reasons, but primarily because the user has to explicitly think about the distributed case and can’t use the existing libraries on distributed data. Instead, what’s needed is a deeper integration so that the same R and pandas libraries work on local and distributed data.<br /><br />There are several projects and teams working on distributed data frames, including <a href="https://www.youtube.com/watch?v=AcyI_V8FeIU">Sparkling Pandas</a> (which has the best name), Adatao’s <a href="http://ddf.io/">distributed data frame</a>, and <a href="http://blaze.pydata.org/docs/dev/index.html">Blaze</a>. All are at an early stage, but as they mature the experience of working with distributed data frames from R or Python will become practically seamless. Of course, Spark already provides machine learning libraries for Scala, Java, and Python, which is a different approach to getting existing libraries like R or Pandas running on Hadoop. Having multiple competing solutions is broadly a good thing, and something that we see a lot of in open source ecosystems.<br /><br /><h3>Combining the Pieces</h3>Imagine if you could share a large dataset and the notebooks containing your work in a form that makes it easy for anyone to run them—it’s a sort of holy grail for researchers.<br /><br />To see what this might look like, have a look at the talk by Andy Petrella and Xavier Tordoir on <a href="http://fr.slideshare.net/noootsab/lightning-fast-genomics-with-spark-adam-and-scala">Lightning fast genomics</a>, where they used a <a href="https://github.com/andypetrella/spark-notebook">Spark Notebook</a>&nbsp;and the <a href="http://bdgenomics.org/">ADAM</a> genomics processing engine to run a clustering algorithm over a part of the 1000 Genomes dataset. It combines all the topics above—open data, cloud computing, notebooks, and distributed data frames—into one.<br /><br />There’s still work to be done to expand the tooling and to make the whole experience smoother, nevertheless this demo shows that it's possible for scientists to analyse large amounts of data, on demand and in a way that is repeatable, using powerful high-level machine learning libraries. I'm optimistic that tools like this will become commonplace in the not-to-distant future.